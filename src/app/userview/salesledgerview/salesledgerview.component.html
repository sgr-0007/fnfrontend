
<h3>List of Buyer's</h3> 
<!-- <mat-grid-list cols="2" rowHeight="80px">
  <mat-grid-tile>
    <mat-form-field appearance="standard">
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Search any keyword....." #input>
      
    </mat-form-field>
  </mat-grid-tile>
  <mat-grid-tile>
    <div class="button">
      <button class="mx-1" mat-icon-button (click)="createLdger()">
        Create </button>
      <button class="mx-1" mat-icon-button (click)="generatePDF()">
      <img
      class="icon"
      src="../../../assets/pdficon.png"
    /></button>
    <button class="mx-1" mat-icon-button (click)="exporter.exportTable('xlsx',{fileName:'Sales_data'})">
      <img
      class="icon"
      src="../../../assets/excelicon.png"
    />
    </button> -->
    <!-- <button class="mx-1" mat-icon-button (click)="exporter.exportTable('json',{fileName:'footballers_data'})">
      <img
      class="icon"
      src="../../../assets/csvicon.png"
    />
    </button>
    <button class="mx-1" mat-icon-button (click)="exporter.exportTable('txt',{fileName:'footballers_data'})"><img
      class="icon"
      src="../../../assets/doc1.png"
    /></button> -->
    <!-- </div>
  </mat-grid-tile>
</mat-grid-list> -->
<!-- <div  class="mt-3 mat-elevation-z8 example-container" >
 -->  <!-- <mat-form-field appearance="standard">
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
    
      
  </mat-form-field>
     -->
 
  
<!-- <mat-table matTableExporter #exporter="matTableExporter" class="table" [dataSource]="dataSource" matSort matSortChange>
 -->
 <!--  <ng-container matColumnDef="sno">
    <mat-header-cell *matHeaderCellDef mat-sort-header > SNO </mat-header-cell>
    <mat-cell *matCellDef="let element;let i=index;"> {{i+1}} </mat-cell>
  </ng-container> -->
<!--   <ng-container matColumnDef="ledgerCode">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Ledger Code </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{element.ledgerCode}} </mat-cell>
  </ng-container>

    <ng-container matColumnDef="ledgerName">
      <mat-header-cell *matHeaderCellDef mat-sort-header> LedgerName </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.ledgerName}} </mat-cell>
    </ng-container>
  
    <ng-container matColumnDef="ledgerAlias">
      <mat-header-cell *matHeaderCellDef> LedgerAlias</mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.ledgerAlias}} </mat-cell>
    </ng-container>
  
    <ng-container matColumnDef="homeBranchName">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Associated Home Branch </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.homeBranchName}} </mat-cell>
    </ng-container>
 -->  <!-- 
    <ng-container matColumnDef="bankName">
      <th mat-header-cell *matHeaderCellDef> Bank Name </th>
      <td mat-cell *matCellDef="let element"> {{element.bankName}} </td>
    </ng-container>
    <ng-container matColumnDef="address1">
      <th mat-header-cell *matHeaderCellDef> Mailing Address 1 </th>
      <td mat-cell *matCellDef="let element"> {{element.address1}} </td>
    </ng-container>
    
    <ng-container matColumnDef="address2">
      <th mat-header-cell *matHeaderCellDef> Mailing Address 1 </th>
      <td mat-cell *matCellDef="let element"> {{element.address2}} </td>
    </ng-container> -->
<!--     <ng-container matColumnDef="city">
      <mat-header-cell *matHeaderCellDef> City </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.cityName}} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="state">
      <mat-header-cell *matHeaderCellDef> State </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.stateName}} </mat-cell>
      
    </ng-container>
 --><!--     <ng-container matColumnDef="bankAccountNumber">
      <th mat-header-cell *matHeaderCellDef> Account Number </th>
      <td mat-cell *matCellDef="let element"> {{element.bankAccountNumber}} </td>
    </ng-container>
    <ng-container matColumnDef="ifscCode">
      <th mat-header-cell *matHeaderCellDef> IFSC Code </th>
      <td mat-cell *matCellDef="let element"> {{element.ifscCode}} </td>
    </ng-container>
    <ng-container matColumnDef="bankAddress">
      <th mat-header-cell *matHeaderCellDef> Bank Address </th>
      <td mat-cell *matCellDef="let element"> {{element.bankAddress}} </td>
    </ng-container>
 -->    <!-- <ng-container matColumnDef="gst">
      <mat-header-cell *matHeaderCellDef> GST </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.gst}} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="pano">
      <mat-header-cell *matHeaderCellDef> PAN NO </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.panno}} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="subGroupId">
      <mat-header-cell *matHeaderCellDef> Subgroup </mat-header-cell>
      <mat-cell *matCellDef="let element"> {{element.subGroupName}} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="approvalStatus">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Approval Status </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <mat-select  *ngIf="urole!=maker" #matNativeControl   name="approveValue" [disabled]="approvalstatus"    [(value)]="element.approvalStatus"  (selectionChange)="selectApprovalStatus($event.value,element.ledgerId)"> -->
          <!-- <mat-select-trigger *ngIf="element.ledgerId==this.selectedId" [ngClass]="selectdValue.valueClass"><mat-icon>{{selectdValue.valueIcon}}</mat-icon>{{selectdValue.valueName}}</mat-select-trigger>
           --><!-- <mat-option [hidden]="chekforuser(approve)" *ngFor="let approve of Vlaues" [value]="approve.valueid"  [ngClass]="approve.valueClass"  >
               -->         
            <!-- <mat-icon>{{approve.valueIcon}}</mat-icon> --> <!-- {{approve.valueName}} -->
        <!--   </mat-option> --><!-- 
          <mat-option [value]=1 ngClass='mat-color-green'><mat-icon>fiber_new</mat-icon>New</mat-option>
          <mat-option [value]=2 ngClass="mat-color-green"><mat-icon>done</mat-icon>Checked</mat-option>
          <mat-option [value]=3 ngClass="mat-color-green"><mat-icon>done_all</mat-icon>Approved</mat-option>
          <mat-option [value]=4 ngClass="mat-color-red"><mat-icon>clear</mat-icon>Incorrect</mat-option>
          <mat-option [value]=5 ngClass="mat-color-red"><mat-icon> clear_all</mat-icon>Rejected</mat-option>
         --><!-- </mat-select> -->
         
         
        <!--  <div class="text-center" *ngIf="urole==maker">
          <label [ngClass]="Vlaues[0].valueClass" *ngIf="element.approvalStatus==Vlaues[0].valueid" >{{Vlaues[0].valueName}}</label>
          <label [ngClass]="Vlaues[1].valueClass" *ngIf="element.approvalStatus==Vlaues[1].valueid" >{{Vlaues[1].valueName}}</label>
          <label [ngClass]="Vlaues[2].valueClass" *ngIf="  element.approvalStatus==Vlaues[2].valueid" >{{Vlaues[2].valueName}}</label>
          <label  [ngClass]="Vlaues[3].valueClass" *ngIf="  element.approvalStatus==Vlaues[3].valueid" >{{Vlaues[3].valueName}}</label>
          <label [ngClass]="Vlaues[4].valueClass" *ngIf="  element.approvalStatus==Vlaues[4].valueid" >{{Vlaues[4].valueName}}</label>
         </div>
        
      </mat-cell>
    </ng-container> -->

    

    <!-- <ng-container matColumnDef="affectInventory">
      <mat-header-cell *matHeaderCellDef> Does Inveventory get Affected </mat-header-cell>
      <mat-cell *matCellDef="let element" > {{element.affectInventory}} </mat-cell>
    </ng-container> 
    <ng-container matColumnDef="action">
      <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
      <mat-cell *matCellDef="let element" class="action-link"> 
        
        <button [disabled]="element.approvalStatus==Vlaues[2].valueid" mat-icon-button  color="primary" (click)="openDialog('Update',element)"><mat-icon>edit</mat-icon></button>
        <button mat-icon-button color="primary" (click)="view(element)"><mat-icon>remove_red_eye</mat-icon></button>
      button my-1 mat-icon-button  color="warn" (click)="deleteSalesLedger(element)"><mat-icon>delete</mat-icon></button> -->
        <!-- <button [disabled]="element.approvalStatus==Vlaues[2].valueid" mat-icon-button color="success" (click)="updateStatus(element)"><mat-icon>done</mat-icon></button>
         --> 
        
        <!-- 
        <mat-menu class="fabclass" #appMenu="matMenu">
          <div mat-menu-list><button mat-mini-fab color="primary" (click)="openDialog('Update',element)"><mat-icon>edit</mat-icon></button></div>
          <div mat-menu-list><button my-1 mat-mini-fab color="warn" (click)="deleteSalesLedger(element)"><mat-icon>delete</mat-icon></button></div>
          <div mat-menu-list><button mat-mini-fab color="success" (click)="updateStatus(element)"><mat-icon>done</mat-icon></button></div>
          
          <ng-template matMenuContent let-name="name">
            <div mat-menu-item><button mat-mini-fab color="primary" (click)="openDialog('Update',element)"><mat-icon>edit</mat-icon></button></div>
            <div mat-menu-item><button mat-mini-fab color="warn" (click)="deleteSalesLedger(element)"><mat-icon>delete</mat-icon></button></div>
            
          </ng-template>        </mat-menu>
         -->
        <!-- <button mat-icon-button [matMenuTriggerFor]="appMenu" [matMenuTriggerData]="{name: 'Sally'}">
          <mat-icon>more_vert</mat-icon>
        </button>
        
         -->
        <!-- <button mat-mini-fab color="primary" (click)="openDialog('Update',element)"><mat-icon>edit</mat-icon></button>
        <button mat-mini-fab color="warn" (click)="deleteSalesLedger(element)"><mat-icon>delete</mat-icon></button>
        <button mat-mini-fab color="success" (click)="updateStatus(element)"><mat-icon>done</mat-icon></button>
         --><!--
           <a (click)="openDialog('Update',element)"><i class="material-icons">edit</i></a> | 
        <a (click)="deleteSalesLedger(element)"><i class="material-icons">delete</i></a>   -->
      <!-- </mat-cell>
    </ng-container> -->
    <!-- <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr> -->
    <!-- <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
  <tr class="mat-row" *matNoDataRow>
    
    <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
  </tr>
</mat-table> -->

<!-- <mat-paginator [pageSizeOptions]="[10,20,50]" aria-label="Select page of users" showFirstLastButtons></mat-paginator>
 --> <!--  <mat-paginator
  [length]="length"
  [pageSizeOptions]="[2, 4, 6]"
  showFirstLastButtons
></mat-paginator> -->
<!-- </div> -->


<p-table #dt  [value]="salesData" [(selection)]="selectedData"   [paginator]="true" [rows]="rows" [showCurrentPageReport]="true" [(first)]="first"
   styleClass="myTable" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,50]"
   [globalFilterFields]="['ledgerCode','ledgerName','homeBranchName','cityName','stateName','subGroupName','approvalStatus']" 
   dataKey="ledgerId" editMode="row" [rowSelectable]="isRowSelectable">
   <ng-template pTemplate="caption">
    <div class="row">
      <div class="col-lg-1 mb-1"><p-button label="Create"  (click)="createLdger()" ></p-button></div>
      <div class="col mb-1 text-end">
        <p-button label="Approved" *ngIf="urole==approver"  class="mx-2" (click)="approveSelectedLdger()" ></p-button>
        <p-button label="Reject"   *ngIf="urole==approver"  class="mx-2" (click)="rejectSelectedLdger()" ></p-button>
        <p-button label="Check"  *ngIf="urole==checker"   class="mx-2" (click)="checkSelectedLdger()" ></p-button>
        <p-button label="Incorrect" *ngIf="urole==checker"   class="mx-2" (click)="incorrectSelectedLdger()" ></p-button>
      </div>
      
      <div class="tablename">List Of Buyer's</div>
      
      <div class="row align-left">  
        <div class="col text-start">     
        <span class="p-input-icon-left ml-auto">
            <i class="pi pi-search"></i>
            <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')" placeholder="Search keyword" />
        </span>
        </div>
    
          <div class="col text-end">
            
    <div class="button">
      <!-- <button class="mx-1" mat-icon-button (click)="createLdger()">
        Create </button> -->
      <button class="mx-1" mat-icon-button (click)="generatePDF()">
      <img
      class="icon"
      src="../../../assets/pdficon.png"
    /></button>
   <!--  <button class="mx-1" mat-icon-button (click)="exporter.exportTable('xlsx',{fileName:'Sales_data'})">
      <img
      class="icon"
      src="../../../assets/excelicon.png"
    />
    </button> -->
   
    </div>
     <!--      <button  (click)="exportPdf()" class="me-2 noBorder" pTooltip="PDF" tooltipPosition="bottom" >
              <img
              class="icon"
              src="../../../assets/pdficon.png"
              height="24px"
            /></button> -->
<!--              <button (click)="exportExcel()" pTooltip="Excel" tooltipPosition="bottom" class="p-button-success mr-2 noBorder"  pTooltip="XLS" tooltipPosition="bottom">
              <img
              class="icon"
              src="../../../assets/excelicon.png"
              height="24px"
            />
            </button> -->
            </div>
          </div>


      </div>
  </ng-template>
  <ng-template pTemplate="header"></ng-template>
  
          <ng-template pTemplate="header" >
        <tr >

          <th style="width: 2rem">
            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
            <th  pSortableColumn="ledgerCode"> Buyer Code
                <p-sortIcon field="ledgerCode"></p-sortIcon>
            </th>
            <th  pSortableColumn="ledgerName">Buyer Name
                <p-sortIcon field="ledgerName"></p-sortIcon>
            </th>

            <th  pSortableColumn="homeBranchName"> Associated Home Branch
                <p-sortIcon field="homeBranchName"></p-sortIcon>
            </th>
            <th  pSortableColumn="cityName">City
                <p-sortIcon field="cityName"></p-sortIcon>
            </th>
            <th  pSortableColumn="stateName">State
              <p-sortIcon field="stateName"></p-sortIcon>
          </th>
          <th  pSortableColumn="subGroupName">Subgroup
            <p-sortIcon field="subGroupName"></p-sortIcon>
        </th>
        
        
          <th  pSortableColumn="approvalStatus">Approval Status
            <p-sortIcon field="approvalStatus"></p-sortIcon>
        </th>
            <!-- <th>Status</th> -->
            <th>Action</th>
  
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
      <tr [pEditableRow]="rowData">
        <td >
          <p-tableCheckbox [value]="rowData" [disabled]="isAlreadyApproved(rowData)"></p-tableCheckbox>
      </td>
        <td>
                    {{rowData.ledgerCode}}
            
        </td>
        <td>
                  {{rowData.ledgerName}}
          
      </td>
      
        <td>
                    {{rowData.homeBranchName}}
          
        </td>
        <td>
                  {{rowData.cityName}}
          
      </td>
      <td>
                {{rowData.stateName}}
        
    </td>
    <td>
      
              {{rowData.subGroupName}}
         
  </td>
  <td>
    <p-cellEditor>
        <ng-template pTemplate="input">
          
          <p-dropdown name="approvalstatus" *ngIf="urole==approver" appendTo="body" optionDisabled="New" [options]="Vlaues"  optionValue="valueid" optionLabel="valueName" [(ngModel)]="rowData.approvalStatus">
          </p-dropdown>
          <p-dropdown name="approvalstatus" *ngIf="urole==checker"  appendTo="body" optionDisabled="New" [options]="Vlaues1"  optionValue="valueid" optionLabel="valueName" [(ngModel)]="rowData.approvalStatus">
        </p-dropdown>
          </ng-template>
        <ng-template pTemplate="output">
           
            
          <label [ngClass]="Vlaues[0].valueClass" *ngIf="rowData.approvalStatus==Vlaues[0].valueid" >{{Vlaues[0].valueName}}</label>
          <label [ngClass]="Vlaues[1].valueClass" *ngIf="rowData.approvalStatus==Vlaues[1].valueid" >{{Vlaues[1].valueName}}</label>
          <label [ngClass]="Vlaues[2].valueClass" *ngIf="  rowData.approvalStatus==Vlaues[2].valueid" >{{Vlaues[2].valueName}}</label>
          <label  [ngClass]="Vlaues[3].valueClass" *ngIf="  rowData.approvalStatus==Vlaues[3].valueid" >{{Vlaues[3].valueName}}</label>
          <label [ngClass]="Vlaues[4].valueClass" *ngIf="  rowData.approvalStatus==Vlaues[4].valueid" >{{Vlaues[4].valueName}}</label>
        </ng-template>
    </p-cellEditor>
</td>
        <!-- <td>
            <p-cellEditor>
                <ng-template pTemplate="input">
                  <p-dropdown name="isactive" [options]="isactive" [(ngModel)]="rowData.isactive">
                  </p-dropdown>
                </ng-template>
                <ng-template pTemplate="output" *ngIf="rowData.isactive==true">Active</ng-template>
                <ng-template pTemplate="output" *ngIf="rowData.isactive==false">InActive</ng-template>
            </p-cellEditor>
        </td> -->
        <td style="text-align:center">
          <button [disabled]="rowData.approvalStatus==Vlaues[2].valueid" mat-icon-button  color="primary" (click)="openDialog('Update',rowData)"><mat-icon>edit</mat-icon></button>
        <button mat-icon-button color="primary" (click)="view(rowData)"><mat-icon>remove_red_eye</mat-icon></button>
        <!-- <button my-1 mat-icon-button  color="warn" (click)="deleteSalesLedger(element)"><mat-icon>delete</mat-icon></button> -->
        <!-- <button [disabled]="rowData.approvalStatus==Vlaues[2].valueid" mat-icon-button color="success" (click)="updateStatus(rowData)"><mat-icon>done</mat-icon></button> -->

        <button *ngIf="!editing" [disabled]="rowData.approvalStatus==Vlaues[2].valueid" pButton type="button" pInitEditableRow  label="A"
        class="ui-button-info"  (click)="onRowEditInit(rowData)"></button>
    <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check"
        class="ui-button-success" style="margin-right: .5em" (click)="onRowEditSave(rowData.ledgerId,rowData)"></button>
    <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times"
        class="ui-button-danger" (click)="onRowEditCancel(rowData, ri)"></button>

          <!--   <button *ngIf="!editing" pButton type="button" pInitEditableRow icon="pi pi-pencil"
                class="ui-button-info" [disabled]="disable" (click)="onRowEditInit(rowData)"></button>
            <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check"
                class="ui-button-success" style="margin-right: .5em" (click)="onRowEditSave(rowData.groupid,rowData)"></button>
            <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times"
                class="ui-button-danger" (click)="onRowEditCancel(rowData, ri)"></button>
        --> </td>
    </tr>
    </ng-template>
  </p-table>

